// Code generated by protoc-gen-go-messaging. DO NOT EDIT.

package github_pb

import (
	messaging_pb "github.com/pentops/o5-go/messaging/v1/messaging_pb"
	protojson "google.golang.org/protobuf/encoding/protojson"
)

// Service: WebhookTopic
// Method: Push

func (msg *PushMessage) O5Message(id string) (*messaging_pb.Message, error) {
	body, err := protojson.Marshal(msg)
	if err != nil {
		return nil, err
	}
	return &messaging_pb.Message{
		DestinationTopic: "github-webhook",
		MessageId:        id,
		GrpcService:      "o5.registry.github.v1.WebhookTopic",
		GrpcMethod:       "Push",
		Body: &messaging_pb.Any{
			TypeUrl:  "type.googleapis.com/o5.registry.github.v1.PushMessage",
			Value:    body,
			Encoding: messaging_pb.WireEncoding_WIRE_ENCODING_PROTOJSON,
		},
		Headers: map[string]string{},
	}, nil
}

func (msg *PushMessage) MessagingTopic() string {
	return "github-webhook"
}
func (msg *PushMessage) MessagingHeaders() map[string]string {
	headers := map[string]string{
		"grpc-service": "/o5.registry.github.v1.WebhookTopic/Push",
		"grpc-message": "o5.registry.github.v1.PushMessage",
	}
	return headers
}
